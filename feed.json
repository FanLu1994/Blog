{
    "version": "https://jsonfeed.org/version/1",
    "title": "何妨吟啸且徐行",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2023/05/16/vben-admin%E6%8D%A2%E8%82%A4%E5%AE%9E%E7%8E%B0/",
            "url": "http://example.com/2023/05/16/vben-admin%E6%8D%A2%E8%82%A4%E5%AE%9E%E7%8E%B0/",
            "title": "vben-admin换肤实现",
            "date_published": "2023-05-16T00:19:08.000Z",
            "content_html": "<p>最近在 github 上看到了一个后台管理的前端项目，使用了 vue3+ts+vite+ant-vue 的技术，看起来很不错，功能特别丰富，clone 下来发现代码也写的特别好，比我现在的小白代码根本不在同一个等级，因此想要学习一下。 个人觉得从一个功能抽丝剥茧来学习一个功能的写法可能会对自己的技术提高有帮助。</p>\n<p>项目中的侧边栏提供了超多的主题选项，可以丰富的变换主题。因此本文想分析一下这个换肤是如何实现的。</p>\n<p><img data-src=\"https://secure2.wostatic.cn/static/wGUf6UvBJUZVXfAPhrzaF/image.png?auth_key=1684196309-2jkBMzvREcZ21xSJjxnEvU-0-4173f6dd779469091bae7835b4c93aa7\" alt=\"\" /></p>\n<h2 id=\"黑色亮色主题切换\"><a class=\"anchor\" href=\"#黑色亮色主题切换\">#</a> 黑色 / 亮色主题切换</h2>\n<p>主题切换组件 AppDarkModeToggle.vue</p>\n<ul>\n<li>定义点击事件 toggleDarkMode\n<ol>\n<li>\n<p>调用设置黑色主题函数 setDarkMode</p>\n<p>修改 pinia 状态中的 dark 模式，并将变量存储到 localStorage 中</p>\n</li>\n<li>\n<p>调用 updateDarkTheme</p>\n<ul>\n<li>获取 htmlRoot dom 节点，即本项目应用的根节点</li>\n<li>判断根节点是否包含 dark class 定义</li>\n<li>如果是 dark\n<ul>\n<li>判断是否为生产模式，并加载 dark 主题 css（由 vite-plugin-theme 支持）</li>\n<li>将根节点的 data-teme 设置为 dark</li>\n<li>并添加 class 为 dark</li>\n</ul>\n</li>\n<li>如果不是 dark\n<ul>\n<li>将根节点 data-theme 设置为 light</li>\n<li>并且移除 dark class</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<p><pre class=\"line-numbers language-Python\" data-language=\"Python\"><code class=\"language-Python\">这里修改data-theme为dark，利用了less中条件判断语句\n例如：\n\n  html[data-theme&#x3D;&#39;dark&#39;] &#123;\n    .@&#123;prefix-cls&#125; &#123;\n      border: 1px solid rgb(196 188 188);\n    &#125;\n  &#125;\n\nps：less还支持动态变量名，6666<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br />\n3. 调用 updateHeaderBgColor 修改 header 的背景色<br />\n - 判断是否为 dark 模式，获取到颜色，如果不是暗色，那就获取当前设置的颜色<br />\n color = appStore.getHeaderSetting.bgColor;<br />\n- 将获取到的颜色设置 css 变量  setCssVar</p>\n<p><pre class=\"line-numbers language-JavaScript\" data-language=\"JavaScript\"><code class=\"language-JavaScript\">export function setCssVar(prop: string, val: any, dom &#x3D; docEle) &#123;\n  console.log(prop,val)\n  dom.style.setProperty(prop, val);\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre><br />\n- 计算得到 hover 颜色（亮度提高 6），同样设置 css 变量</p>\n<pre><code>        这里用到了自定义的颜色函数，我觉得很有用\n</code></pre>\n<p><pre class=\"line-numbers language-TypeScript\" data-language=\"TypeScript\"><code class=\"language-TypeScript\">&#x2F;**\n * 判断是否 十六进制颜色值.\n * 输入形式可为 #fff000 #f00\n *\n * @param   String  color   十六进制颜色值\n * @return  Boolean\n *&#x2F;\nexport function isHexColor(color: string) &#123;\n  const reg &#x3D; &#x2F;^#([0-9a-fA-F]&#123;3&#125;|[0-9a-fA-f]&#123;6&#125;)$&#x2F;;\n  return reg.test(color);\n&#125;\n\n&#x2F;**\n * RGB 颜色值转换为 十六进制颜色值.\n * r, g, 和 b 需要在 [0, 255] 范围内\n *\n * @return  String          类似#ff00ff\n * @param r\n * @param g\n * @param b\n *&#x2F;\nexport function rgbToHex(r: number, g: number, b: number) &#123;\n  &#x2F;&#x2F; tslint:disable-next-line:no-bitwise\n  const hex &#x3D; ((r &lt;&lt; 16) | (g &lt;&lt; 8) | b).toString(16);\n  return &#39;#&#39; + new Array(Math.abs(hex.length - 7)).join(&#39;0&#39;) + hex;\n&#125;\n\n&#x2F;**\n * Transform a HEX color to its RGB representation\n * @param &#123;string&#125; hex The color to transform\n * @returns The RGB representation of the passed color\n *&#x2F;\nexport function hexToRGB(hex: string) &#123;\n  let sHex &#x3D; hex.toLowerCase();\n  if (isHexColor(hex)) &#123;\n    if (sHex.length &#x3D;&#x3D;&#x3D; 4) &#123;\n      let sColorNew &#x3D; &#39;#&#39;;\n      for (let i &#x3D; 1; i &lt; 4; i +&#x3D; 1) &#123;\n        sColorNew +&#x3D; sHex.slice(i, i + 1).concat(sHex.slice(i, i + 1));\n      &#125;\n      sHex &#x3D; sColorNew;\n    &#125;\n    const sColorChange: number[] &#x3D; [];\n    for (let i &#x3D; 1; i &lt; 7; i +&#x3D; 2) &#123;\n      sColorChange.push(parseInt(&#39;0x&#39; + sHex.slice(i, i + 2)));\n    &#125;\n    return &#39;RGB(&#39; + sColorChange.join(&#39;,&#39;) + &#39;)&#39;;\n  &#125;\n  return sHex;\n&#125;\n\nexport function colorIsDark(color: string) &#123;\n  if (!isHexColor(color)) return;\n  const [r, g, b] &#x3D; hexToRGB(color)\n    .replace(&#x2F;(?:\\(|\\)|rgb|RGB)*&#x2F;g, &#39;&#39;)\n    .split(&#39;,&#39;)\n    .map((item) &#x3D;&gt; Number(item));\n  return r * 0.299 + g * 0.578 + b * 0.114 &lt; 192;\n&#125;\n\n&#x2F;**\n * Darkens a HEX color given the passed percentage\n * @param &#123;string&#125; color The color to process\n * @param &#123;number&#125; amount The amount to change the color by\n * @returns &#123;string&#125; The HEX representation of the processed color\n *&#x2F;\nexport function darken(color: string, amount: number) &#123;\n  color &#x3D; color.indexOf(&#39;#&#39;) &gt;&#x3D; 0 ? color.substring(1, color.length) : color;\n  amount &#x3D; Math.trunc((255 * amount) &#x2F; 100);\n  return &#96;#$&#123;subtractLight(color.substring(0, 2), amount)&#125;$&#123;subtractLight(\n    color.substring(2, 4),\n    amount,\n  )&#125;$&#123;subtractLight(color.substring(4, 6), amount)&#125;&#96;;\n&#125;\n\n&#x2F;**\n * Lightens a 6 char HEX color according to the passed percentage\n * @param &#123;string&#125; color The color to change\n * @param &#123;number&#125; amount The amount to change the color by\n * @returns &#123;string&#125; The processed color represented as HEX\n *&#x2F;\nexport function lighten(color: string, amount: number) &#123;\n  color &#x3D; color.indexOf(&#39;#&#39;) &gt;&#x3D; 0 ? color.substring(1, color.length) : color;\n  amount &#x3D; Math.trunc((255 * amount) &#x2F; 100);\n  return &#96;#$&#123;addLight(color.substring(0, 2), amount)&#125;$&#123;addLight(\n    color.substring(2, 4),\n    amount,\n  )&#125;$&#123;addLight(color.substring(4, 6), amount)&#125;&#96;;\n&#125;\n\n&#x2F;* Suma el porcentaje indicado a un color (RR, GG o BB) hexadecimal para aclararlo *&#x2F;\n&#x2F;**\n * Sums the passed percentage to the R, G or B of a HEX color\n * @param &#123;string&#125; color The color to change\n * @param &#123;number&#125; amount The amount to change the color by\n * @returns &#123;string&#125; The processed part of the color\n *&#x2F;\nfunction addLight(color: string, amount: number) &#123;\n  const cc &#x3D; parseInt(color, 16) + amount;\n  const c &#x3D; cc &gt; 255 ? 255 : cc;\n  return c.toString(16).length &gt; 1 ? c.toString(16) : &#96;0$&#123;c.toString(16)&#125;&#96;;\n&#125;\n\n&#x2F;**\n * Calculates luminance of an rgb color\n * @param &#123;number&#125; r red\n * @param &#123;number&#125; g green\n * @param &#123;number&#125; b blue\n *&#x2F;\nfunction luminanace(r: number, g: number, b: number) &#123;\n  const a &#x3D; [r, g, b].map((v) &#x3D;&gt; &#123;\n    v &#x2F;&#x3D; 255;\n    return v &lt;&#x3D; 0.03928 ? v &#x2F; 12.92 : Math.pow((v + 0.055) &#x2F; 1.055, 2.4);\n  &#125;);\n  return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;\n&#125;\n\n&#x2F;**\n * Calculates contrast between two rgb colors\n * @param &#123;string&#125; rgb1 rgb color 1\n * @param &#123;string&#125; rgb2 rgb color 2\n *&#x2F;\nfunction contrast(rgb1: string[], rgb2: number[]) &#123;\n  return (\n    (luminanace(~~rgb1[0], ~~rgb1[1], ~~rgb1[2]) + 0.05) &#x2F;\n    (luminanace(rgb2[0], rgb2[1], rgb2[2]) + 0.05)\n  );\n&#125;\n\n&#x2F;**\n * Determines what the best text color is (black or white) based con the contrast with the background\n * @param hexColor - Last selected color by the user\n *&#x2F;\nexport function calculateBestTextColor(hexColor: string) &#123;\n  const rgbColor &#x3D; hexToRGB(hexColor.substring(1));\n  const contrastWithBlack &#x3D; contrast(rgbColor.split(&#39;,&#39;), [0, 0, 0]);\n\n  return contrastWithBlack &gt;&#x3D; 12 ? &#39;#000000&#39; : &#39;#FFFFFF&#39;;\n&#125;\n\n&#x2F;**\n * Subtracts the indicated percentage to the R, G or B of a HEX color\n * @param &#123;string&#125; color The color to change\n * @param &#123;number&#125; amount The amount to change the color by\n * @returns &#123;string&#125; The processed part of the color\n *&#x2F;\nfunction subtractLight(color: string, amount: number) &#123;\n  const cc &#x3D; parseInt(color, 16) - amount;\n  const c &#x3D; cc &lt; 0 ? 0 : cc;\n  return c.toString(16).length &gt; 1 ? c.toString(16) : &#96;0$&#123;c.toString(16)&#125;&#96;;\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br />\n- updateSidebarBgColor  修改侧边栏颜色 原理同上</p>\n<p>以上大概有几个关键点：</p>\n<ol>\n<li>充分利用 less 的用法\n<ul>\n<li>条件语句</li>\n<li>动态前缀变量名</li>\n</ul>\n</li>\n<li>利用 js 来修改原生 css 变量的颜色，同时计算悬浮颜色</li>\n<li>项目中大部分样式类名以前缀方式定义，主 less 中定义了一个 vben 为 namespace，在 less 中作为全局变量；而 designSetting 中定义了 prefixCls 在 ts 中作为全局变量。 他们存在这对应关系，因此需要同时修改才能起作用。</li>\n</ol>\n<h2 id=\"导航栏模式切换\"><a class=\"anchor\" href=\"#导航栏模式切换\">#</a> 导航栏模式切换</h2>\n<blockquote>\n<p>导航栏模式分为了四种：</p>\n</blockquote>\n<p><img data-src=\"https://secure2.wostatic.cn/static/sPjnd9xQ7suquNPauh5Qqw/image.png?auth_key=1684196309-2o96KrtYmowc5t254R8edZ-0-bbe91f85e3201ce1060d94391f94427b\" alt=\"\" /></p>\n<ol>\n<li>左边可折叠菜单，右边上部面包屑，下部内容</li>\n<li>上下布局，上部面包屑，下面左边菜单右边内容</li>\n<li>上下布局，上面菜单，下面内容</li>\n<li>左右布局，左边菜单点击展开子目录，右上方面包屑，下方内容</li>\n</ol>\n<p>右边的样式选项都是通过自定义的 Picker 组件来实现的，导航栏模式选择的是 TypePicker 组件，传入的方法是 baseHandler:</p>\n<p><pre class=\"line-numbers language-Vue\" data-language=\"Vue\"><code class=\"language-Vue\">&lt;TypePicker\n   menuTypeList&#x3D;&#123;menuTypeList&#125;\n   handler&#x3D;&#123;(item: typeof menuTypeList[0]) &#x3D;&gt; &#123;\n     baseHandler(HandlerEnum.CHANGE_LAYOUT, &#123;\n       mode: item.mode,\n       type: item.type,\n       split: unref(getIsHorizontal) ? false : undefined,\n     &#125;);\n   &#125;&#125;\n   def&#x3D;&#123;unref(getMenuType)&#125;\n &#x2F;&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>\n<p>其中 menuTypeList 表示上方提到的四种模式，其定义如下：</p>\n<p><pre class=\"line-numbers language-TypeScript\" data-language=\"TypeScript\"><code class=\"language-TypeScript\">export const menuTypeList &#x3D; [\n  &#123;\n    title: t(&#39;layout.setting.menuTypeSidebar&#39;),\n    mode: MenuModeEnum.INLINE,\n    type: MenuTypeEnum.SIDEBAR,\n  &#125;,\n  &#123;\n    title: t(&#39;layout.setting.menuTypeMix&#39;),\n    mode: MenuModeEnum.INLINE,\n    type: MenuTypeEnum.MIX,\n  &#125;,\n\n  &#123;\n    title: t(&#39;layout.setting.menuTypeTopMenu&#39;),\n    mode: MenuModeEnum.HORIZONTAL,\n    type: MenuTypeEnum.TOP_MENU,\n  &#125;,\n  &#123;\n    title: t(&#39;layout.setting.menuTypeMixSidebar&#39;),\n    mode: MenuModeEnum.INLINE,\n    type: MenuTypeEnum.MIX_SIDEBAR,\n  &#125;,\n];<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>\n<blockquote>\n<p>ps: 由样式定义来看，less 支持不同状态下，class 后面拼接字符串的样式，比如 &amp;--active</p>\n</blockquote>\n<p>调用 handler 函数：</p>\n<ol>\n<li>获取 appStore 配置信息</li>\n<li>根据传来的 mode 和 type 生成新的 menuSetting</li>\n<li>将新的配置更新到 pinia 全局配置中</li>\n<li>更新来的配置几乎每一个属性都封装为一个 computed</li>\n</ol>\n<p><pre class=\"line-numbers language-TypeScript\" data-language=\"TypeScript\"><code class=\"language-TypeScript\">export interface MenuSetting &#123;\n  bgColor: string;\n  fixed: boolean;\n  collapsed: boolean;\n  siderHidden: boolean;\n  canDrag: boolean;\n  show: boolean;\n  hidden: boolean;\n  split: boolean;\n  menuWidth: number;\n  mode: MenuModeEnum;\n  type: MenuTypeEnum;\n  theme: ThemeEnum;\n  topMenuAlign: &#39;start&#39; | &#39;center&#39; | &#39;end&#39;;\n  trigger: TriggerEnum;\n  accordion: boolean;\n  closeMixSidebarOnChange: boolean;\n  collapsedShowTitle: boolean;\n  mixSideTrigger: MixSidebarTriggerEnum;\n  mixSideFixed: boolean;\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>\n<p>全都定义在 useMenuSetting.ts 中，这是一个<strong>自定义 hook</strong></p>\n<h2 id=\"系统主题切换\"><a class=\"anchor\" href=\"#系统主题切换\">#</a> 系统主题切换</h2>\n<p>自定义组件 ThemeColorPicker 实现，包含三个 prop</p>\n<ol>\n<li>颜色列表</li>\n<li>默认颜色 通过 getThemeColor 计算属性获取（真实来源自 pinia 中存储的 themeColor）** 默认值都配置在 src/projectSetting.ts 下面 **</li>\n<li>event，表示事件 ID</li>\n</ol>\n<p>通过点击事件，调用 baseHandle 修改全局配置；</p>\n<p>调用 generateColors 方法生成一组颜色，这组颜色的计算可以参考：</p>\n<p><pre class=\"line-numbers language-TypeScript\" data-language=\"TypeScript\"><code class=\"language-TypeScript\">export function generateColors(&#123;\n  color &#x3D; primaryColor,\n  mixLighten,\n  mixDarken,\n  tinycolor,\n&#125;: GenerateColorsParams) &#123;\n  const arr &#x3D; new Array(19).fill(0);\n  const lightens &#x3D; arr.map((_t, i) &#x3D;&gt; &#123;\n    return mixLighten(color, i &#x2F; 5);\n  &#125;);\n\n  const darkens &#x3D; arr.map((_t, i) &#x3D;&gt; &#123;\n    return mixDarken(color, i &#x2F; 5);\n  &#125;);\n\n  const alphaColors &#x3D; arr.map((_t, i) &#x3D;&gt; &#123;\n    return tinycolor(color)\n      .setAlpha(i &#x2F; 20)\n      .toRgbString();\n  &#125;);\n\n  const shortAlphaColors &#x3D; alphaColors.map((item) &#x3D;&gt; item.replace(&#x2F;\\s&#x2F;g, &#39;&#39;).replace(&#x2F;0\\.&#x2F;g, &#39;.&#39;));\n\n  const tinycolorLightens &#x3D; arr\n    .map((_t, i) &#x3D;&gt; &#123;\n      return tinycolor(color)\n        .lighten(i * 5)\n        .toHexString();\n    &#125;)\n    .filter((item) &#x3D;&gt; item !&#x3D;&#x3D; &#39;#ffffff&#39;);\n\n  const tinycolorDarkens &#x3D; arr\n    .map((_t, i) &#x3D;&gt; &#123;\n      return tinycolor(color)\n        .darken(i * 5)\n        .toHexString();\n    &#125;)\n    .filter((item) &#x3D;&gt; item !&#x3D;&#x3D; &#39;#000000&#39;);\n  return [\n    ...lightens,\n    ...darkens,\n    ...alphaColors,\n    ...shortAlphaColors,\n    ...tinycolorDarkens,\n    ...tinycolorLightens,\n  ].filter((item) &#x3D;&gt; !item.includes(&#39;-&#39;));\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>\n<p>然后利用 vite-plugin-theme 方法替换样式变量</p>\n<h2 id=\"顶栏主题\"><a class=\"anchor\" href=\"#顶栏主题\">#</a> 顶栏主题</h2>\n<ul>\n<li>\n<p>自定义组件 ThemeColorPicker</p>\n</li>\n<li>\n<p>调用 updateHeaderBgColor 方法</p>\n<p>首先判断是否为夜间模式，夜间模式不生效；</p>\n<p>然后修改 css 变量 --header-bg-color</p>\n<p>修改悬浮颜色： const hoverColor = lighten (color!, 6); 修改 css 变量</p>\n<p>修改 headerSetting： 判断选择的颜色是否属于暗色，然后结合当前是否为暗色模式，判断设置是否生效</p>\n</li>\n</ul>\n<h2 id=\"菜单主题\"><a class=\"anchor\" href=\"#菜单主题\">#</a> 菜单主题</h2>\n<p>同顶栏主题</p>\n<h2 id=\"最后\"><a class=\"anchor\" href=\"#最后\">#</a> 最后</h2>\n<blockquote>\n<p>vben 这个项目比较大，功能可以说是非常丰富，也可以说时非常冗杂，想要啃下来非常困难。 看到一个博客专门分析 vben 的可以参考：</p>\n</blockquote>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/15/%E9%B8%A1%E6%AF%9B%E8%92%9C%E7%9A%AE%E5%91%A8%E5%88%8A-01/",
            "url": "http://example.com/2023/05/15/%E9%B8%A1%E6%AF%9B%E8%92%9C%E7%9A%AE%E5%91%A8%E5%88%8A-01/",
            "title": "鸡毛蒜皮周刊-01",
            "date_published": "2023-05-15T14:53:53.000Z",
            "content_html": "<h2 id=\"人类群星闪耀时\"><a class=\"anchor\" href=\"#人类群星闪耀时\">#</a> 人类群星闪耀时</h2>\n<p>作者茨威格选择了一些很有意思的历史时间进行文学叙述，文笔确实很好。 但是作为一个历史” 爱好者 “，始终无法相信这样过度的文学描写，这样总会导致历史失真。</p>\n<h2 id=\"家里的wifi\"><a class=\"anchor\" href=\"#家里的wifi\">#</a> 家里的 wifi</h2>\n<p>上海电信默认光猫是路由模式，又接了一个小米路由器，网速总是不稳定，这周找师傅来改成了桥接模式，需要电信远程下发数据还挺麻烦。 但是改完之后，室内的台式机（当时装修脑子抽，没给台式机留网口），网络还是一般，怀疑是主板网卡的问题，于是买了一个绿联的即插网卡，插上搞定！</p>\n<h2 id=\"chrome插件\"><a class=\"anchor\" href=\"#chrome插件\">#</a> chrome 插件</h2>\n<p>最近对 chrome 插件开发感兴趣。于是琢磨着写个小项目试试能做点啥。于是考虑做个统计网页浏览时间的小应用。简单来说，有两个步骤，</p>\n<ol>\n<li>获取到当前标签页的地址</li>\n<li>切换标签页时重新进行计时<br />\n网上的插件开发教程写的还行，但是对于 api 的教程太少了。于是找到了一个现成的插件项目叫做 “网费很贵”，对于我想要的功能它已经做的很完整了。于是扒了下它的源码【<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NoZWVwemgvdGltZXIvYmxvYi9tYWluL1JFQURNRS16aC5tZCVFMyU4MCU5MSVFMyU4MCU4Mg==\">https://github.com/sheepzh/timer/blob/main/README-zh.md】。</span> 项目代码十分优雅，一看就能甩我好几年的功力。<br />\n找到了几个关键 api：<br />\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">chrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>onActivated<span class=\"token punctuation\">.</span>addListener  <span class=\"token comment\">// 添加切换 tab 的监听</span>\nchrome<span class=\"token punctuation\">.</span>browser<span class=\"token punctuation\">.</span>setBadgeText  <span class=\"token comment\">// 修改插件图标上的文字</span>\nchrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>tabId<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 根据 tabID 获取到标签的信息</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre><br />\n 代码会放到 github 上。</li>\n</ol>\n<h2 id=\"docxtemplater\"><a class=\"anchor\" href=\"#docxtemplater\">#</a> docxtemplater</h2>\n<p>工作中用到了前端导出 word 的操作，chatGpt 给我推荐了这个库<br />\n！[[Pasted image 20230228121250.png]]<br />\n 使用方法可以参照：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDk0MTM5NDEzMjQ4MDgxOTI4\">前端使用 docxtemplater 导出 word 文档最佳实践 - 掘金 (juejin.cn)</span><br />\n 这个库的地址在：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL29wZW4teG1sLXRlbXBsYXRpbmcvZG9jeHRlbXBsYXRlcg==\">open-xml-templating/docxtemplater: Generate docx, pptx, and xlsx from templates (Word, Powerpoint and Excel documents), from Node.js, the Browser and the command line / Demo: https://www.docxtemplater.com/demo. #docx #office #generator #templating #report #json #generate #generation #template #create #pptx #docx #xlsx #react #vuejs #angularjs #browser #typescript #image #html #table #chart (github.com)</span><br />\n 使用下来，感觉很强大的一个库，支持模板渲染、循环数据渲染、表格循环渲染。</p>\n<h2 id=\"诡秘之主\"><a class=\"anchor\" href=\"#诡秘之主\">#</a> 诡秘之主</h2>\n<p>这是一个在各种排名都很高的网文，我看了几十章，实在看不下去了，节奏太慢了，看网文的目的是放松和休息大脑，实在不想费劲阅读。<br />\n但是打开起点，看到它在第一名，还是继续看下去吧。</p>\n<h2 id=\"ppchart\"><a class=\"anchor\" href=\"#ppchart\">#</a> PPChart</h2>\n<p>用 echarts 总觉得调样式很麻烦，这个网站不错，可以看到不少好看的效果，以后可以用来参考（拷贝）。😲<br />\n<span class=\"exturl\" data-url=\"aHR0cDovL3BwY2hhcnQuY29tLyMv\">PPChart - 让图表更简单</span><br />\n！[[Pasted image 20230301164049.png]]<br />\n 同类型的网站还有：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubWFrZWFwaWUuY24vZWNoYXJ0c19jYXRlZ29yeS9zZXJpZXMtYmFy\">series-bar 柱状图 - makeapie echarts 图表可视化案例</span></p>\n<h2 id=\"nas赚钱\"><a class=\"anchor\" href=\"#nas赚钱\">#</a> nas 赚钱</h2>\n<p>在极空间 z4s 上打开了迅雷的网心云插件，用闲置的带宽做 pcdn 赚钱，目前几天下来，每天 5 毛钱。可惜没有公网 ip 不然应该会高一点，现在好像还不够 nas 的电费。</p>\n",
            "tags": []
        }
    ]
}