{
    "version": "https://jsonfeed.org/version/1",
    "title": "何妨吟啸且徐行 • All posts by \"golang\" tag",
    "description": "",
    "home_page_url": "https://fanlu.top",
    "items": [
        {
            "id": "https://fanlu.top/2023/12/17/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/go-ios%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/",
            "url": "https://fanlu.top/2023/12/17/%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91/go-ios%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/",
            "title": "go-ios测试工具",
            "date_published": "2023-12-17T12:24:47.000Z",
            "content_html": "<blockquote>\n<p>这是一个 go 实现的 ios 自动化测试工具，用于实现在 linux window mac 上实现 ios 自动化<br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2RhbmllbHBhdWx1cy9nby1pb3M=\"> https://github.com/danielpaulus/go-ios</span><br>\n！！ ios17 已经无法挂载开发者镜像</p>\n</blockquote>\n<h2 id=\"功能简介\"><a class=\"markdownIt-Anchor\" href=\"#功能简介\">#</a> 功能简介</h2>\n<ul>\n<li>安装 ipa 到 iphone</li>\n<li>在多平台运行 XCTest，包括 webdriverAgent</li>\n<li>启动和停止应用</li>\n<li>无需手动点击弹窗就可以配对设备</li>\n<li>自动安装开发者镜像</li>\n<li>在设备上执行热状态和网络仿真（弱网测试）</li>\n</ul>\n<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h2>\n<p>两种方案</p>\n<ul>\n<li>npm install go-ios</li>\n<li>下载代码，编译 go 项目</li>\n</ul>\n<blockquote>\n<p>所有命令的默认输出都是 JSON 格式。如果你更喜欢人类可读的输出结果，请在命令中指定 --nojson 选项。<br>\n默认情况下，除非指定 --udid=some_udid 开关，否则命令将使用找到的第一个设备。<br>\n指定 -v 用于调试日志，指定 -t 用于转储每条信息。</p>\n</blockquote>\n<h2 id=\"使用\"><a class=\"markdownIt-Anchor\" href=\"#使用\">#</a> 使用</h2>\n<p>！！windows 要安装并启动 itunes；<br>\n！！ios17 目前很多功能不支持，手上也没有其他设备，所以很多功能试不了<br>\n！！若命令未指定–udid，则命令默认在列表中第一个设备执行</p>\n<h2 id=\"查看设备列表\"><a class=\"markdownIt-Anchor\" href=\"#查看设备列表\">#</a> 查看设备列表</h2>\n<blockquote>\n<p>以下命令类似，windows 如果是自己变异的就用 exe 执行</p>\n</blockquote>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># mac</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ios  list</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># windows</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>.<span class=\"token punctuation\">\\</span>go-ios.exe list</pre></td></tr></table></figure><h3 id=\"安装开发者镜像\"><a class=\"markdownIt-Anchor\" href=\"#安装开发者镜像\">#</a> 安装开发者镜像</h3>\n<pre><code>ios image auto\n</code></pre>\n<p>这里有点问题 我的 iphone 设备使用 mac 或者 widnows 都无法成功安装镜像</p>\n<ul>\n<li>从 github 下载镜像出错，众所周知的原因</li>\n<li>手动下载后报错，原因暂时位置，并且我的设备时 17.1 了，为什么要下载 16.6 呢？</li>\n</ul>\n<pre><code>&#123;&quot;err&quot;:&quot;open devimages\\\\16.6\\\\DeveloperDiskImage.dmg.signature: The system cannot find the file specified.&quot;,&quot;image&quot;:&quot;devimages\\\\16.6\\\\DeveloperDiskImage.dmg&quot;,&quot;level&quot;:&quot;error&quot;,&quot;msg&quot;:&quot;error mounting image&quot;,&quot;time&quot;:&quot;2023-12-06T08:53:56+08:00&quot;,&quot;udid&quot;:&quot;00008101-001E38100242001E&quot;&#125;\n</code></pre>\n<p>经过排查，iphone 需要开启开发者模式：<br>\n设置 -》通用 -》隐私与安全性 -》开发者模式<br>\n打开之后重启设备</p>\n<h3 id=\"设备信息\"><a class=\"markdownIt-Anchor\" href=\"#设备信息\">#</a> 设备信息</h3>\n<pre><code>ios info\n</code></pre>\n<h3 id=\"系统日志\"><a class=\"markdownIt-Anchor\" href=\"#系统日志\">#</a> 系统日志</h3>\n<pre><code>ios syslog\n</code></pre>\n<h3 id=\"应用相关\"><a class=\"markdownIt-Anchor\" href=\"#应用相关\">#</a> 应用相关</h3>\n<h4 id=\"应用列表\"><a class=\"markdownIt-Anchor\" href=\"#应用列表\">#</a> 应用列表</h4>\n<pre><code>ios apps --list  安装应用  不是json输出\nios apps --all  全部应用\nios apps --system  系统应用\n</code></pre>\n<h4 id=\"安装ipa\"><a class=\"markdownIt-Anchor\" href=\"#安装ipa\">#</a> 安装 ipa</h4>\n<h4 id=\"启动停止应用程序\"><a class=\"markdownIt-Anchor\" href=\"#启动停止应用程序\">#</a> 启动停止应用程序</h4>\n<p>需要开发者镜像</p>\n<h3 id=\"状态模拟\"><a class=\"markdownIt-Anchor\" href=\"#状态模拟\">#</a> 状态模拟</h3>\n<p>需要开发者镜像</p>\n<h3 id=\"崩溃日志\"><a class=\"markdownIt-Anchor\" href=\"#崩溃日志\">#</a> 崩溃日志</h3>\n<pre><code> .\\go-ios.exe crash ls  查看崩溃日志\n .\\go-ios.exe crash cp &quot;*&quot; &quot;./&quot;  拷贝日志到指定目录\n</code></pre>\n<h3 id=\"截图\"><a class=\"markdownIt-Anchor\" href=\"#截图\">#</a> 截图</h3>\n<p>ios17 不行</p>\n<h3 id=\"抓包\"><a class=\"markdownIt-Anchor\" href=\"#抓包\">#</a> 抓包</h3>\n<p>需要进程 id，进程 id 需要开发者镜像</p>\n<h3 id=\"重启\"><a class=\"markdownIt-Anchor\" href=\"#重启\">#</a> 重启</h3>\n<h3 id=\"磁盘相关\"><a class=\"markdownIt-Anchor\" href=\"#磁盘相关\">#</a> 磁盘相关</h3>\n<p>查看磁盘大小</p>\n<pre><code>(base) PS D:\\git\\go-ios&gt; .\\go-ios.exe diskspace\n&#123;&quot;level&quot;:&quot;info&quot;,&quot;msg&quot;:&quot;no udid specified using first device in list&quot;,&quot;time&quot;:&quot;2023-12-12T08:28:29+08:00&quot;,&quot;udid&quot;:&quot;00008101-001E38100242001E&quot;&#125;\n      Model: iPhone13,2\n  BlockSize: 512\n  FreeSpace: 34.5GB\n  UsedSpace: 93.3GB\n TotalSpace: 127.9GB\n</code></pre>\n<h2 id=\"配对密钥\"><a class=\"markdownIt-Anchor\" href=\"#配对密钥\">#</a> 配对密钥</h2>\n<pre><code>.\\go-ios.exe readpair\n</code></pre>\n",
            "tags": [
                "工具",
                "golang"
            ]
        }
    ]
}